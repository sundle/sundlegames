"use strict";document.addEventListener("readystatechange",function(e){const n=10,t=!1,u=["red","blue","yellow","purple"],f={red:"#ff003f",blue:"#449aff",yellow:"#ffd80f",purple:"#e965ff"},l={0:"‚òÖÔ∏è‚É£ ",1:"1Ô∏è‚É£ ",2:"2Ô∏è‚É£ ",3:"3Ô∏è‚É£ ",4:"4Ô∏è‚É£ ",5:"5Ô∏è‚É£ ",6:"6Ô∏è‚É£ ",7:"7Ô∏è‚É£ ",8:"8Ô∏è‚É£ ",9:"9Ô∏è‚É£ ",10:"üîü"};document.querySelectorAll(".grid-row");const g=document.querySelectorAll(".cell"),a=document.getElementById("attempt-container"),o=document.querySelectorAll(".attempt-cell p"),h=document.getElementById("clear"),p=document.getElementById("back"),m=document.getElementById("enter"),y=document.getElementById("words-left"),r=document.getElementById("text-results"),v=document.getElementById("copy-results");let i=[],c=[],b=null,_=n,w=Object.keys(allowed_words_freq),M=Object.keys(ans_words_freq),s="null",x="",d="";function U(){h.addEventListener("click",O),p.addEventListener("click",Y),m.addEventListener("click",P),v.addEventListener("click",W);var l=[];for(let e=0;e<g.length;e++)g[e].cid=e,g[e].n_buttons=0,g[e].addEventListener("click",F),l[e]=0;var t=[];x=I(u),y.style.color=f[x],y.style.textShadow="0 0 0.1em "+f[x];let o=0;for(let e=0;e<n;e++){let n=B(ans_words_freq).toUpperCase(),e=0;for(;e<ans_words_freq.length&&-1!==t.indexOf(n);)n=B(ans_words_freq).toUpperCase(),e++;t.push(n);var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];for(let t=0;t<n.length;t++){var i=function(e,t,n){e=document.createElement(e);e.setAttribute("class",t),void 0!==n&&(e.id=n);return e}("button","letter");i.setAttribute("aria-pressed","false"),N(i,n[t]),i.col=x,0===t?L(i,x+"-button"):(i.col=I(u),L(i,i.col+"-button")),i.addEventListener("click",z);let e=I(r);if(3<g[e].n_buttons){var s={};for(let e=0;e<r.length;e++){var d=r[e];s[d]=l[d]}var a=function(t){let n=Object.keys(t),l=t[n[0]],o=parseInt(n[0]);for(let e=0;e<function(e){return Object.keys(e).length}(n);e++)t[n[e]]<l&&(l=t[n[e]],o=parseInt(n[e]));return{lowest_index:o,lowest_value:l}}(s);e=a.lowest_index}c=a=void 0;var a=r,c=e;-1!==(c=a.indexOf(c))&&a.splice(c,1),g[e].appendChild(i),l[e]+=1,i.cid=e,i.style.top=5*g[e].n_buttons+"px",g[e].n_buttons+=1,o++}}D(),T(t)}function z(e){var t=e.target;e.stopPropagation(),j(a,"attempt-invalid"),A(t,"selected")?(j(t,"selected"),c.splice(c.indexOf(t),1),b=null,D()):c.length<5&&(L(t,"selected"),c.push(t),b=t),C(),0<c.length?(E([h,p]),(5==c.length?E:k)([m])):k([h,p,m])}function F(e){b&&1<g[b.cid].n_buttons&&b.col===x&&(g[b.cid].removeChild(b),g[e.target.parentNode.cid].appendChild(b),--g[b.cid].n_buttons,g[e.target.parentNode.cid].n_buttons+=1,b.cid=e.target.parentNode.cid,b.style.top="0px",O()),D()}function C(){for(let e=0;e<5;e++)e<c.length?o[e].textContent=c[e].textContent:o[e].textContent=""}function E(t){for(let e=0;e<t.length;e++)t[e].removeAttribute("disabled")}function k(t){for(let e=0;e<t.length;e++)t[e].setAttribute("disabled",!0)}function O(e){if(j(a,"attempt-invalid"),0<c.length){for(let e=0;e<c.length;e++)j(c[e],"selected");S(c),C(),k([h,p,m]),b=null}}function Y(e){j(a,"attempt-invalid"),0<c.length&&(j(c.pop(),"selected"),k([m]),C(),c.length<1)&&(k([p,h]),b=null)}function P(e){var l,t=a.textContent.replace(/\s+/g,"").toLowerCase();if(-1!==w.indexOf(t)||-1!==M.indexOf(t)){for(let e=0;e<c.length;e++)g[c[e].cid].removeChild(c[e]),g[c[e].cid].n_buttons--;if(S(c),k([h,p,m]),b=null,C(),_--,N(y,_+"/"+n),D(),!function(){for(let e=0;e<g.length;e++)if(1<g[e].childNodes.length)return!1;return q(!0),!0}()){let t=0,n=!1;for(let e=0;e<g.length;e++)1<g[e].n_buttons?g[e].col===x&&(n=!0):0==g[e].n_buttons&&(t+=1);if(n&&0<t)return;var o=[],r={q:0,w:0,e:0,r:0,t:0,y:0,u:0,i:0,o:0,p:0,a:0,s:0,d:0,f:0,g:0,h:0,j:0,k:0,l:0,z:0,x:0,c:0,v:0,b:0,n:0,m:0};for(let e=0;e<g.length;e++)0<g[e].n_buttons&&"BUTTON"==g[e].lastChild.nodeName&&(l=g[e].lastChild.innerText.toLowerCase(),o.push(l),r[l]++);for(var i of[allowed_words_freq,ans_words_freq])for(var s in i){let e=!0;for(var d in i[s])r[d]<i[s][d]&&(e=!1);if(e)return void T(s)}console.log("you lost!"),q()}}else L(a,"attempt-invalid")}function q(e=!1){N(y,e?"Yay, you won!":"Oh no, you lost!"),k([h,p,m]),k(i),s="Word Solitaire\nwordsolitaire.com";for(let e=0;e<g.length;e++)e%4==0&&(s+="\n"),s+=l[g[e].n_buttons.toString()];T(s),r.value=s,r.innerText=s,v.style.display="inline"}function W(){r.value=s,navigator.clipboard.writeText(r.value),document.execCommand(s)}function I(e){return e[Math.floor(Math.random()*e.length)]}function B(e){return I(Object.keys(e))}function N(e,t){e.innerText=t}function A(e,t){return-1!==e.className.split(" ").indexOf(t)}function L(e,t){A(e,t)||(e.className+=" "+t)}function j(e,t){var n=e.className.split(" "),t=n.indexOf(t);-1!==t&&n.splice(t,1),e.className=n.join(" ")}function S(e){e.length=0}function T(e){t&&console.log(e)}function D(){var t=document.querySelectorAll("button.letter"),n=document.querySelectorAll("p.star");k(t);for(let e=0;e<t.length;e++)t[e].style.filter="";for(let e=0;e<n.length;e++)n[e].style.filter="";i=[];for(let t=0;t<g.length;t++)if(A(g[t].lastChild,"selected"))E([g[t].lastChild]);else{E([g[t].lastChild]),i.push(g[t].lastChild);let e=f[g[t].lastChild.col];A(g[t].lastChild,"star")&&(e="#ccc"),g[t].lastChild.style.filter="drop-shadow(0px 0px 10px "+e+")"}}N(y,"Find the "+n+" scrambled words"),async function(){var e=new Date;var t=e.getDate()<9?"0"+e.getDate():e.getDate(),n=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,e=e.getFullYear()+"-"+n+"-"+t;d=new Date(e).getTime(),console.log(d),U()}(),console.log(d),console.log("words ans size = ",Object.keys(ans_words_freq).length),document.getElementById("loading").style.display="none",document.getElementById("game").style.display="block"});